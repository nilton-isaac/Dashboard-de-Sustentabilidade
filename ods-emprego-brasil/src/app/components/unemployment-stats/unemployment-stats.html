<!-- Seção de Desemprego -->
<section class="space-y-8">
  
  <!-- Header da Seção -->
  <div class="text-center">
    <p class="text-xs uppercase tracking-wider text-text-mute mb-2">ODS 8 • Trabalho Decente</p>
    <h2 class="text-3xl font-extrabold text-text-base mb-4">Estatísticas de Desemprego</h2>
    <p class="text-text-mute max-w-2xl mx-auto">Dados atualizados da PNAD Contínua (IBGE) sobre o mercado de trabalho brasileiro</p>
  </div>

  <!-- KPI Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    
    <!-- Taxa de Desocupação -->
    <div class="rounded-xl p-6 bg-gradient-to-br from-ink-800 to-ink-900 border border-white/10 shadow-card group hover:border-mag-500/40 transition-all duration-300">
      <div class="flex items-center justify-between mb-4">
        <span class="p-2 rounded-lg bg-mag-500/15 text-mag-500">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
          </svg>
        </span>
        <span class="text-xs px-2 py-1 rounded bg-mag-500/20 text-mag-400">▼ 0,3 p.p.</span>
      </div>
      <p class="text-xs text-text-mute mb-1">Taxa de Desocupação (BR)</p>
      <div class="flex items-end gap-2 mb-2">
        <span class="text-3xl font-extrabold text-text-base">{{ currentUnemploymentRate || '8,6' }}%</span>
      </div>
      <p class="text-[11px] text-text-mute">Tri. móvel Mar–Mai/2025</p>
    </div>
    
    <!-- População Economicamente Ativa -->
    <div class="rounded-xl p-6 bg-gradient-to-br from-ink-800 to-ink-900 border border-white/10 shadow-card group hover:border-cyan-400/40 transition-all duration-300">
      <div class="flex items-center justify-between mb-4">
        <span class="p-2 rounded-lg bg-cyan-400/15 text-cyan-400">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
          </svg>
        </span>
        <span class="text-xs px-2 py-1 rounded bg-cyan-400/20 text-cyan-400">▲ 1,2%</span>
      </div>
      <p class="text-xs text-text-mute mb-1">Pop. Economicamente Ativa</p>
      <div class="flex items-end gap-2 mb-2">
        <span class="text-3xl font-extrabold text-text-base">{{ economicallyActivePopulation || '108,2' }}M</span>
      </div>
      <p class="text-[11px] text-text-mute">pessoas em idade ativa</p>
    </div>
    
    <!-- Rendimento Médio -->
    <div class="rounded-xl p-6 bg-gradient-to-br from-ink-800 to-ink-900 border border-white/10 shadow-card group hover:border-success/40 transition-all duration-300">
      <div class="flex items-center justify-between mb-4">
        <span class="p-2 rounded-lg bg-success/15 text-success">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.51-1.31c-.562-.649-1.413-1.076-2.353-1.253V5z" clip-rule="evenodd"></path>
          </svg>
        </span>
        <span class="text-xs px-2 py-1 rounded bg-success/20 text-success">▲ R$ 89</span>
      </div>
      <p class="text-xs text-text-mute mb-1">Rendimento Médio Real</p>
      <div class="flex items-end gap-2 mb-2">
        <span class="text-3xl font-extrabold text-text-base">R$ {{ averageIncome || '2.847' }}</span>
      </div>
      <p class="text-[11px] text-text-mute">trabalho principal efetivo</p>
    </div>
  </div>

  <!-- Gráfico de Evolução -->
  <div class="rounded-xl p-6 bg-white/5 dark:bg-white/5 backdrop-blur border border-white/10 shadow-card">
    <div class="flex items-center justify-between mb-6">
      <div>
        <p class="text-xs uppercase tracking-wider text-text-mute">Série Histórica</p>
        <h3 class="text-xl font-extrabold text-text-base">Evolução da Taxa de Desocupação</h3>
      </div>
      <div class="flex gap-2">
        <button class="px-3 py-1 text-xs rounded-md bg-mag-500 text-white">12M</button>
        <button class="px-3 py-1 text-xs rounded-md bg-ink-800 text-text-mute hover:bg-mag-500/20">24M</button>
        <button class="px-3 py-1 text-xs rounded-md bg-ink-800 text-text-mute hover:bg-mag-500/20">5A</button>
      </div>
    </div>
    
    <!-- Gráfico Simulado com Gradiente -->
    <div class="relative">
      <div class="flex items-end justify-between h-48 px-4">
        <div *ngFor="let month of unemploymentHistory; let i = index" 
             class="group relative flex-1 mx-1 cursor-pointer"
             [title]="month.month + ': ' + month.rate + '%'">
          <!-- Barra com gradiente -->
          <div class="w-full bg-gradient-to-t from-mag-500/60 to-cyan-400/60 rounded-t-sm transition-all duration-300 group-hover:from-mag-500 group-hover:to-cyan-400"
               [style.height.%]="(month.rate / maxRate) * 100">
          </div>
          <!-- Tooltip no hover -->
          <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-ink-900 text-text-base text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
            {{ month.month }}: {{ month.rate }}%
          </div>
        </div>
      </div>
      
      <!-- Labels dos meses -->
      <div class="flex justify-between mt-4 px-4">
        <span *ngFor="let month of unemploymentHistory; let i = index" 
              class="text-xs text-text-mute"
              [class.font-semibold]="i === unemploymentHistory.length - 1"
              [class.text-mag-400]="i === unemploymentHistory.length - 1">
          {{ month.month }}
        </span>
      </div>
    </div>
    
    <!-- Legenda -->
    <div class="flex items-center justify-center gap-6 mt-6 pt-4 border-t border-white/10">
      <div class="flex items-center gap-2">
        <div class="w-3 h-3 rounded-full bg-gradient-to-r from-mag-500 to-cyan-400"></div>
        <span class="text-xs text-text-mute">Taxa de Desocupação (%)</span>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-3 h-3 rounded-full bg-text-mute/30"></div>
        <span class="text-xs text-text-mute">Meta OCDE (6,5%)</span>
      </div>
    </div>
  </div>

  <!-- Análise por Região -->
  <div class="rounded-xl p-6 bg-white/5 dark:bg-white/5 backdrop-blur border border-white/10 shadow-card">
    <div class="flex items-center justify-between mb-6">
      <div>
        <p class="text-xs uppercase tracking-wider text-text-mute">Comparação Regional</p>
        <h3 class="text-xl font-extrabold text-text-base">Desocupação por Região</h3>
      </div>
      <button class="text-sm text-mag-400 hover:text-mag-300 underline">Exportar dados</button>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
      <div *ngFor="let region of regionalData" 
           class="group p-4 rounded-lg bg-ink-800/60 border border-white/5 hover:border-mag-500/30 transition-all duration-300">
        <div class="flex items-center justify-between mb-3">
          <h4 class="font-semibold text-text-base group-hover:text-mag-400 transition-colors">{{ region.name }}</h4>
          <span class="text-xs px-2 py-1 rounded bg-white/10 text-text-mute">{{ region.change || '+0,2' }}</span>
        </div>
        <p class="text-2xl font-extrabold text-text-base mb-3">{{ region.rate }}%</p>
        
        <!-- Barra de progresso com gradiente -->
        <div class="w-full bg-white/10 rounded-full h-2">
          <div class="bg-gradient-to-r from-mag-500 to-cyan-400 h-2 rounded-full transition-all duration-500" 
               [style.width.%]="(region.rate / maxRegionalRate) * 100"></div>
        </div>
        
        <!-- Comparação com média nacional -->
        <div class="mt-2 flex items-center justify-between text-xs">
          <span class="text-text-mute">vs. Nacional</span>
          <span [class]="region.rate > 8.6 ? 'text-warning' : 'text-success'">
            {{ region.rate > 8.6 ? '+' : '-' }}{{ getAbsDifference(region.rate, 8.6).toFixed(1) }} p.p.
          </span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Fonte dos Dados -->
  <div class="rounded-lg p-4 bg-ink-800/40 border border-white/5">
    <div class="flex items-start gap-3">
      <span class="p-1 rounded bg-cyan-400/15 text-cyan-400 mt-0.5">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
      </span>
      <div class="text-sm">
        <p class="text-text-base font-medium mb-1">Fonte dos Dados</p>
        <p class="text-text-mute">Instituto Brasileiro de Geografia e Estatística (IBGE) - Pesquisa Nacional por Amostra de Domicílios Contínua (PNAD Contínua)</p>
        <p class="text-text-mute mt-1"><strong>Última atualização:</strong> {{ lastUpdateDate || 'Maio 2025' }}</p>
      </div>
    </div>
  </div>
  
</section>